- defaults:
    link:
      relink: true   # Removes the old target if it's a symlink
      create: true   # create parent directories to the link as needed.
      force: true    # Force removes the old target, file or folder, and forces a new link

- clean: ['~']

- link:
    ~/.ssh/authorized_keys: authorized_keys
    ~/local/bin/utils: utils
    ~/.tmux.conf:    # defaults to basename without the leading .
    ~/.tmux.conf.local: 

    ~/.vim:
    ~/.vimrc:

    ~/.zshrc:
    ~/.oh-my-zsh:
    ~/.powerlevel10k:
    ~/.p10k.zsh: 

- create:
    - ~/Downloads
    - ~/.vim/undo-history

- shell:
  - command: chsh -s $(which zsh)
    description: Make zsh default shell
  - command: if [ "$USER" == "root" ]; then (sed -r -i '/^.*PermitRootLogin.*$/d' /etc/ssh/sshd_config || true) && echo "PermitRootLogin prohibit-password" >> /etc/ssh/sshd_config; fi
    description: Allow key-based login for root
  - command: if [ "$USER" == "root" ]; then systemctl restart sshd; fi
    description: Restart ssh

